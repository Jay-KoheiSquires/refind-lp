<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuban Link Chain 8mm | REFIND - V2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .product-page { padding: 1rem; max-width: 1200px; margin: 0 auto; }
        .product-gallery { margin-bottom: 1.5rem; }
        .product-main-image {
            aspect-ratio: 1;
            background: var(--color-bg-card);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }
        .product-main-image img { width: 100%; height: 100%; object-fit: contain; padding: 1rem; }
        .product-thumbs { display: flex; gap: 0.5rem; }
        .product-thumb {
            width: 60px; height: 60px;
            background: var(--color-bg-card);
            border-radius: 6px;
            overflow: hidden;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .product-thumb.active { border-color: var(--color-accent); }
        .product-thumb img { width: 100%; height: 100%; object-fit: contain; }
        .product-details { padding-bottom: 120px; }
        .product-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .product-price-large { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
        .price-current { font-size: 1.5rem; font-weight: 700; color: var(--color-accent); }
        .price-was { font-size: 1rem; color: var(--color-text-muted); text-decoration: line-through; }

        /* パターンB: 強化版配送情報 */
        .delivery-info-v2 {
            background: linear-gradient(135deg, rgba(0, 200, 83, 0.1), rgba(0, 200, 83, 0.05));
            border: 1px solid rgba(0, 200, 83, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        .delivery-info-v2.low-stock {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
            border-color: rgba(255, 193, 7, 0.3);
        }
        .delivery-info-v2.made-to-order {
            background: linear-gradient(135deg, rgba(66, 176, 240, 0.1), rgba(66, 176, 240, 0.05));
            border-color: rgba(66, 176, 240, 0.3);
        }
        .delivery-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .delivery-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
            background: #00c853;
            animation: pulse-green 2s infinite;
        }
        .delivery-info-v2.low-stock .delivery-dot {
            background: #ffc107;
            animation: pulse-yellow 1.5s infinite;
        }
        .delivery-info-v2.made-to-order .delivery-dot {
            background: #42B0F0;
            animation: none;
        }
        @keyframes pulse-green {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 200, 83, 0.5); }
            50% { box-shadow: 0 0 0 6px rgba(0, 200, 83, 0); }
        }
        @keyframes pulse-yellow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.5); }
            50% { box-shadow: 0 0 0 6px rgba(255, 193, 7, 0); }
        }
        .delivery-status {
            font-size: 1rem;
            font-weight: 700;
            color: #00c853;
        }
        .delivery-info-v2.low-stock .delivery-status { color: #ffc107; }
        .delivery-info-v2.made-to-order .delivery-status { color: #42B0F0; }
        .delivery-details {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
            margin-left: 1.5rem;
        }
        .delivery-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }
        .delivery-row svg { flex-shrink: 0; }
        .delivery-row .label { color: var(--color-text-muted); }
        .delivery-row .value { font-weight: 600; }
        .stock-bar {
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-top: 0.75rem;
            margin-left: 1.5rem;
            overflow: hidden;
        }
        .stock-bar-fill {
            height: 100%;
            background: #ffc107;
            border-radius: 2px;
            transition: width 0.3s;
        }
        .stock-warning {
            font-size: 0.7rem;
            color: #ffc107;
            margin-top: 0.4rem;
            margin-left: 1.5rem;
        }

        /* バリエーション */
        .variant-section { margin-bottom: 1.5rem; }
        .variant-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            display: flex;
            justify-content: space-between;
        }
        .variant-stock-hint {
            font-size: 0.65rem;
            font-weight: 400;
        }
        .variant-options { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .variant-btn {
            padding: 0.6rem 1rem;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            background: transparent;
            color: var(--color-text);
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .variant-btn:hover { border-color: var(--color-text-muted); }
        .variant-btn.active { border-color: var(--color-accent); background: rgba(66, 176, 240, 0.1); }
        .variant-btn.out-of-stock {
            opacity: 0.5;
            text-decoration: line-through;
        }
        .variant-btn .stock-dot {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        .variant-btn .stock-dot.in { background: #00c853; }
        .variant-btn .stock-dot.low { background: #ffc107; }
        .variant-btn .stock-dot.out { background: #666; }

        /* 購入ボタン */
        .buy-section {
            position: fixed;
            bottom: 60px;
            left: 0;
            right: 0;
            background: var(--color-bg);
            border-top: 1px solid var(--color-border);
            padding: 1rem;
            z-index: 100;
        }
        .buy-row {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }
        .btn-add-cart {
            flex: 1;
            padding: 1rem;
            background: var(--color-accent);
            color: #000;
            font-size: 0.9rem;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .btn-buy-now {
            padding: 1rem 1.5rem;
            background: #fff;
            color: #000;
            font-size: 0.9rem;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .buy-info {
            text-align: center;
            font-size: 0.7rem;
            color: var(--color-text-muted);
        }
        .buy-info strong { color: #00c853; }

        /* 版表示バナー */
        .version-banner {
            position: fixed;
            top: 50px;
            right: 0;
            background: linear-gradient(135deg, #42B0F0, #2d8bc4);
            color: #fff;
            padding: 0.4rem 0.8rem;
            font-size: 0.6rem;
            font-weight: 700;
            z-index: 9999;
            border-radius: 0 0 0 8px;
        }

        .product-description {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--color-border);
        }
        .product-description h3 {
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }
        .product-description p {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            line-height: 1.7;
        }

        @media (min-width: 768px) {
            .product-page {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                padding: 2rem;
            }
            .product-details { padding-bottom: 0; }
            .buy-section {
                position: static;
                background: transparent;
                border-top: none;
                padding: 0;
                margin-top: 1rem;
            }
            .mobile-bottom-nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="version-banner">提案版 V2</div>

    <header class="header">
        <div class="header-container">
            <a href="index-v2.html" style="color: var(--color-text); padding: 0.4rem;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </a>
            <a href="index-v2.html" class="logo">
                <img src="https://baseec-img-mng.akamaized.net/images/user/logo/40799e147a7d1684152ebbcdce0b87d9.png" alt="REFIND" class="logo-img">
            </a>
            <div class="header-actions">
                <button class="icon-btn cart-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-count">0</span>
                </button>
            </div>
        </div>
    </header>

    <main class="product-page">
        <div class="product-gallery">
            <div class="product-main-image">
                <img src="https://baseec-img-mng.akamaized.net/images/item/origin/3f5af8eb7542e1dc46e36efdbf506105.png" alt="Cuban Link Chain 8mm">
            </div>
            <div class="product-thumbs">
                <div class="product-thumb active">
                    <img src="https://baseec-img-mng.akamaized.net/images/item/origin/3f5af8eb7542e1dc46e36efdbf506105.png" alt="View 1">
                </div>
                <div class="product-thumb">
                    <img src="https://baseec-img-mng.akamaized.net/images/item/origin/c3e2ea7c0a7581056eedfdbc6468ce60.png" alt="View 2">
                </div>
                <div class="product-thumb">
                    <img src="https://baseec-img-mng.akamaized.net/images/item/origin/8cf9814f5bd8e4235d0cc1370eb52ce4.png" alt="View 3">
                </div>
            </div>
        </div>

        <div class="product-details">
            <h1 class="product-title">Cuban Link Chain 8mm</h1>
            <div class="product-price-large">
                <span class="price-current">¥49,800</span>
                <span class="price-was">¥68,000</span>
            </div>

            <!-- パターンB: 強化版配送情報 -->
            <div class="delivery-info-v2" id="deliveryInfo">
                <div class="delivery-header">
                    <span class="delivery-dot"></span>
                    <span class="delivery-status">在庫あり｜即日発送</span>
                </div>
                <div class="delivery-details">
                    <div class="delivery-row">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="3" width="15" height="13"></rect>
                            <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                            <circle cx="5.5" cy="18.5" r="2.5"></circle>
                            <circle cx="18.5" cy="18.5" r="2.5"></circle>
                        </svg>
                        <span class="label">発送:</span>
                        <span class="value" id="shipDate">本日14時までの注文で当日発送</span>
                    </div>
                    <div class="delivery-row">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span class="label">届予定:</span>
                        <span class="value" id="arriveDate">12/24(火)までにお届け</span>
                    </div>
                </div>
            </div>

            <!-- カラー選択 -->
            <div class="variant-section">
                <p class="variant-label">
                    カラー
                    <span class="variant-stock-hint">* 色で在庫状況が異なります</span>
                </p>
                <div class="variant-options">
                    <button class="variant-btn active" data-stock="in" onclick="updateDelivery('in')">
                        18K Gold
                        <span class="stock-dot in"></span>
                    </button>
                    <button class="variant-btn" data-stock="low" onclick="updateDelivery('low')">
                        Silver
                        <span class="stock-dot low"></span>
                    </button>
                    <button class="variant-btn" data-stock="out" onclick="updateDelivery('out')">
                        Rose Gold
                        <span class="stock-dot out"></span>
                    </button>
                </div>
            </div>

            <!-- 長さ選択 -->
            <div class="variant-section">
                <p class="variant-label">長さ</p>
                <div class="variant-options">
                    <button class="variant-btn">45cm</button>
                    <button class="variant-btn active">50cm</button>
                    <button class="variant-btn">55cm</button>
                    <button class="variant-btn">60cm</button>
                </div>
            </div>

            <div class="buy-section">
                <div class="buy-row">
                    <button class="btn-add-cart" id="addCartBtn">カートに追加</button>
                    <button class="btn-buy-now">購入</button>
                </div>
                <p class="buy-info" id="buyInfo">
                    <strong>12/24までにお届け</strong> - 14時までの注文で当日発送
                </p>
            </div>

            <div class="product-description">
                <h3>商品説明</h3>
                <p>最高品質のVVSモアサナイトを使用したキューバンリンクチェーン。18Kゴールドコーティングで、本物のゴールドと見分けがつかない輝きを実現。永久保証付き。</p>
            </div>
        </div>
    </main>

    <nav class="mobile-bottom-nav">
        <a href="index-v2.html" class="nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
            <span>Search</span>
        </a>
        <a href="#" class="nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
            <span>Wishlist</span>
        </a>
        <a href="#" class="nav-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
            <span>Cart</span>
        </a>
    </nav>

    <script>
        function updateDelivery(stock) {
            const info = document.getElementById('deliveryInfo');
            const status = info.querySelector('.delivery-status');
            const shipDate = document.getElementById('shipDate');
            const arriveDate = document.getElementById('arriveDate');
            const buyInfo = document.getElementById('buyInfo');
            const addCartBtn = document.getElementById('addCartBtn');

            // Reset classes
            info.classList.remove('low-stock', 'made-to-order');

            // Update variant buttons
            document.querySelectorAll('.variant-btn[data-stock]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.variant-btn[data-stock="${stock}"]`).classList.add('active');

            if (stock === 'in') {
                status.textContent = '在庫あり｜即日発送';
                shipDate.textContent = '本日14時までの注文で当日発送';
                arriveDate.textContent = '12/24(火)までにお届け';
                buyInfo.innerHTML = '<strong>12/24までにお届け</strong> - 14時までの注文で当日発送';
                addCartBtn.textContent = 'カートに追加';
                addCartBtn.disabled = false;
            } else if (stock === 'low') {
                info.classList.add('low-stock');
                status.textContent = '残り3点｜即日発送';
                shipDate.textContent = '本日14時までの注文で当日発送';
                arriveDate.textContent = '12/24(火)までにお届け';
                buyInfo.innerHTML = '<strong style="color:#ffc107;">残り3点!</strong> 12/24までにお届け';
                addCartBtn.textContent = 'カートに追加（残り3点）';
                addCartBtn.disabled = false;
            } else {
                info.classList.add('made-to-order');
                status.textContent = '受注生産';
                shipDate.textContent = 'ご注文後に製作開始';
                arriveDate.textContent = '1/15(水)頃お届け予定';
                buyInfo.innerHTML = '<strong style="color:#42B0F0;">受注生産</strong> - 1/15頃お届け予定';
                addCartBtn.textContent = '予約注文する';
                addCartBtn.disabled = false;
            }
        }

        // Color variant click
        document.querySelectorAll('.variant-section:first-of-type .variant-btn:not([data-stock])').forEach(btn => {
            btn.addEventListener('click', function() {
                this.parentElement.querySelectorAll('.variant-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Length variant click
        document.querySelectorAll('.variant-section:last-of-type .variant-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.parentElement.querySelectorAll('.variant-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>
